---
import Layout from '~/layouts/PageLayout.astro';

import Header from '~/components/widgets/Header.astro';
import Hero2 from '~/components/widgets/Hero2.astro';
import Features from '~/components/widgets/Features.astro';
import Steps2 from '~/components/widgets/Steps2.astro';
import Content from '~/components/widgets/Content.astro';
import Pricing from '~/components/widgets/Pricing.astro';

import { headerData } from '~/navigation';
import BlogLatestPosts from '~/components/widgets/BlogLatestPosts.astro';
import Image from '~/components/common/Image.astro';
import { Icon } from 'astro-icon/components';

const metadata = {
  title: 'Komunikacja cyfrowa w perspektywie post-quantum',
};

// Web3Forms access key
const web3formsKey = import.meta.env.PUBLIC_WEB3FORMS_ACCESS_KEY || 'YOUR_ACCESS_KEY_HERE';
---

<Layout metadata={metadata}>
  <Fragment slot="header">
    <Header
      {...headerData}
      isSticky
      showRssFeed
      showToggleTheme
    />
  </Fragment>

  <!-- Hero2 Widget ******************* -->

  <Hero2
    tagline="Komunikacja cyfrowa w erze post-quantum"
    actions={[
    ]}
    image={{
      src: '~/assets/images/mesh.png',
      alt: 'AstroWind Hero Image',
    }}
  >
    <Fragment slot="title">
      Twoje dane mogą zostać odszyfrowane w przyszłości. Przygotuj się na erę post-quantum już teraz.
    </Fragment>

    <Fragment slot="subtitle">
      <span class="hidden sm:inline">
Pomagam firmom i instytucjom ocenić ryzyko "harvest now, decrypt later", zaplanować migrację do algorytmów post-quantum i zbudować strategię bezpieczeństwa odporną na rozwój komputerów kwantowych.
    </Fragment>
  </Hero2>

  <!-- Features: Dlaczego to ważne -->
  <Features
    title="Dlaczego to ważne właśnie teraz"
    subtitle="Komputery kwantowe nie muszą istnieć, aby zagrozić Twoim danym. Atakujący mogą przechwycić je dziś i odszyfrować w przyszłości."
    columns={2}
    items={[
      {
        title: 'Harvest Now, Decrypt Later',
    description: 'Dziś przechwycone dane zaszyfrowane klasycznymi algorytmami mogą zostać odszyfrowane za kilka lat, gdy pojawi się komputer kwantowy zdolny do łamania szyfrowania.',
        icon: 'tabler:mail-bolt',
      },
      {
        title: 'Długowieczność danych',
        description: 'Jeśli Twoje dane muszą być chronione 5–20 lat, klasyczna kryptografia przestanie być wystarczająca. Ryzyko narasta z każdym rokiem.',
        icon: 'tabler:clock',
      },
      {
        title: 'Utrata zaufania do podpisów',
        description: 'Podpisy cyfrowe oparte na RSA/ECC mogą przestać być wiarygodne. Oznacza to ryzyko podważenia ważności dokumentów i transakcji.',
        icon: 'tabler:shield-off',
      },
      {
        title: 'Migracja zajmuje lata',
        description: 'Duże organizacje potrzebują 3–7 lat, aby przejść na kryptografię post-quantum. Odkładanie decyzji zwiększa ryzyko i koszty.',
        icon: 'tabler:arrow-right',
      },
    ]}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-white dark:bg-transparent"></div>
    </Fragment>
  </Features>

  <!-- Features: Dla kogo -->
  <Features
    title="Dla kogo jest bezpieczeństwo post-quantum?"
    subtitle="Najbardziej zagrożone są organizacje, które przechowują dane przez lata i opierają się na zaufaniu do podpisów cyfrowych, szyfrowania i komunikacji online."
    columns={2}
    items={[
      {
        title: 'Finanse i ubezpieczenia',
        description: 'Transakcje, umowy, dane klientów i historii operacji muszą pozostać poufne oraz prawnie wiążące przez wiele lat. Utrata zaufania do podpisów to realne ryzyko regulacyjne.',
        icon: 'tabler:building-bank',
      },
      {
        title: 'Administracja publiczna i rejestry',
        description: 'Rejestry, e-usługi i dokumenty urzędowe mają horyzont czasowy liczony w dekadach. Atak „przechwyć teraz, odszyfruj później" uderza bezpośrednio w wiarygodność państwa.',
        icon: 'tabler:building-community',
      },
      {
        title: 'Zdrowie, prawo i dane wrażliwe',
        description: 'Dokumentacja medyczna, akta spraw, opinie biegłych czy dane osobowe mają długą wartość i są szczególnie atrakcyjne dla atakujących.',
        icon: 'tabler:heartbeat',
      },
      {
        title: 'Technologie, SaaS i infrastruktura krytyczna',
        description: 'Platformy chmurowe, dostawcy usług cyfrowych i operatorzy krytycznych systemów muszą myśleć o bezpieczeństwie w perspektywie 5–10 lat do przodu.',
        icon: 'tabler:cloud',
      },
    ]}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
    <Fragment slot="footer">
      <div class="mt-12 text-center">
        <p class="text-gray-700 dark:text-gray-300 mb-4">
          Nie widzisz tu swojej branży, ale przetwarzasz dane o długiej wartości?
        </p>
        <a href="#kontakt" class="inline-flex items-center px-5 py-3 rounded-xl text-sm font-medium bg-blue-600 text-white hover:bg-blue-700 transition">
          Zapytaj, jak post-quantum dotyczy Twojej organizacji
        </a>
      </div>
    </Fragment>
  </Features>
  </div>

  <Pricing
      id="oferta"
    title="Jak mogę pomóc Twojej organizacji"
    subtitle="Post-quantum to nie tylko nowe algorytmy. To decyzje o danych, czasie i zaufaniu. Pracuję z organizacjami, które chcą przygotować się na zmiany świadomie. "
    prices={[
      {
        title: 'Ocena gotowości na erę kwantową',
        subtitle: 'Szybka diagnoza',
        price: 'Oferta',
        period: 'na zapytanie',
        items: [
          { description: '60–90 min rozmowy z osobą techniczną / biznesową' },
          { description: 'Wstępne mapowanie krytycznych danych i systemów' },
          { description: 'Prosta ocena ryzyka w 3 poziomach' },
          { description: 'Krótki raport z rekomendacjami "co dalej"' },
        ],
        callToAction: {
          text: 'Umów wstępną konsultację',
          href: '#kontakt',
        },
      },
      {
        title: 'Strategia Post-Quantum Security 2030',
        subtitle: 'Kompleksowe podejście',
        price: 'Oferta',
        period: 'na zapytanie',
        items: [
          { description: 'Analiza kluczowych danych, procesów i systemów' },
          { description: 'Identyfikacja podatnych algorytmów i protokołów' },
          { description: 'Rekomendacje algorytmów PQC (NIST, hybrydy)' },
          { description: 'Roadmapa działań na 2–5 lat' },
          { description: 'Materiały dla zarządu / rady nadzorczej' },
        ],
        callToAction: {
          text: 'Porozmawiaj o strategii',
          href: '#kontakt',
        },
        hasRibbon: false,
      },
      {
        title: 'Warsztaty i edukacja',
        subtitle: 'Dla zarządów, prawników i IT',
        price: 'Oferta',
        period: 'na zapytanie',
        items: [
          { description: '60–120 min warsztatu dopasowanego do branży' },
          { description: 'Scenariusze "co jeśli" i case studies' },
          { description: 'Materiały do dalszego wykorzystania w organizacji' },
          { description: 'Możliwość sesji Q&A dla zarządu lub zespołu' },
        ],
        callToAction: {
          text: 'Zobacz przykładowy program',
          href: '#kontakt',
        },
      },
    ]}
  />


<section class="py-20 bg-blue-50 dark:bg-transparent">
  <div class="container mx-auto px-4 max-w-4xl">

    <div class="grid grid-cols-1 md:grid-cols-[1.1fr_minmax(0,_0.9fr)] gap-10 items-start">
      
      <div>
        <h2 class="text-3xl font-bold tracking-tight text-gray-900 dark:text-white mb-4">
          Dlaczego PostQ.pl?
        </h2>
        <p class="text-lg text-gray-700 dark:text-gray-300 mb-4">
          PostQ powstało z jednego powodu: większość organizacji nie docenia tego, 
          jak długo żyją ich dane i jak bardzo komputery kwantowe podważą dzisiejsze 
          gwarancje poufności i zaufania.
        </p>
        <p class="text-gray-700 dark:text-gray-300 mb-4">
          Łączę doświadczenie techniczne, strategiczne i edukacyjne. Pomagam zespołom 
          bezpieczeństwa, zarządom i prawnikom mówić o post-quantum tym samym językiem 
          i podejmować decyzje, które mają sens w horyzoncie 5–10 lat.
        </p>
        <ul class="mt-4 space-y-3">
          <li class="flex items-start gap-3">
            <Icon name="tabler:check" class="w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5" />
            <span class="text-gray-700 dark:text-gray-300">Praca z organizacjami z sektorów regulowanych i technologicznych</span>
          </li>
          <li class="flex items-start gap-3">
            <Icon name="tabler:check" class="w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5" />
            <span class="text-gray-700 dark:text-gray-300">Skupienie na danych o długiej wartości (finanse, zdrowie, administracja, prawo)</span>
          </li>
          <li class="flex items-start gap-3">
            <Icon name="tabler:check" class="w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5" />
            <span class="text-gray-700 dark:text-gray-300">Oparcie rekomendacji na standardach NIST, ENISA i ETSI</span>
          </li>
        </ul>
      </div>

      <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 p-6">
        <div class="flex items-center gap-4 mb-4">
          <Image
            src="~/assets/images/profile.png"
            alt="Michał Pietrus"
            class="h-14 w-14 rounded-full object-cover"
            width={56}
            height={56}
          />
          <div>
            <p class="text-sm uppercase tracking-wide text-blue-600 dark:text-blue-400">
              Konsultant
            </p>
            <p class="text-lg font-semibold text-gray-900 dark:text-white">
               Michał Pietrus
            </p>
          </div>
        </div>
        <p class="text-sm text-gray-700 dark:text-gray-300 mb-4">
          Zajmuję się bezpieczeństwem komunikacji i kryptografią oraz tym, jak 
          przekładają się one na realne decyzje biznesowe i regulacyjne.
        </p>
        <p class="text-sm text-gray-500 dark:text-gray-400">
          Jeśli chcesz porozmawiać o tym, jak post-quantum dotknie Twojej organizacji, 
          zacznijmy od krótkiej rozmowy — bez zobowiązań.
        </p>
        <div class="mt-5">
          <a href="#kontakt" class="inline-flex items-center px-4 py-2.5 rounded-xl text-sm font-semibold bg-blue-600 text-white hover:bg-blue-700 transition">
            Umów rozmowę
          </a>
        </div>
      </div>

    </div>
  </div>
</section>


<section id="kontakt" class="py-20 bg-blue-50 dark:bg-transparent">
  <div class="container mx-auto px-4 max-w-4xl">

    <div class="mb-10 text-center">
      <h2 class="text-3xl font-bold tracking-tight text-gray-900 dark:text-white">
        Porozmawiajmy o post-quantum w Twojej organizacji
      </h2>
      <p class="mt-4 text-gray-700 dark:text-slate-300 max-w-2xl mx-auto">
        Napisz kilka zdań o swojej sytuacji. Odezwę się z propozacją krótkiej, 
        niezobowiązującej rozmowy i wspólnie sprawdzimy, czy i jak mogę pomóc.
      </p>
    </div>

    <div class="bg-white dark:bg-slate-950/40 border border-gray-200 dark:border-slate-700 rounded-2xl shadow-sm p-6 md:p-8">
      <form id="contact-form" class="grid grid-cols-1 gap-6">
        <input type="hidden" name="access_key" value={web3formsKey} />
        <input type="hidden" name="redirect" value="false" />
        <input type="checkbox" name="botcheck" class="hidden" style="display: none;" />
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label class="block text-sm font-medium text-gray-900 dark:text-slate-200 mb-1">
              Imię i nazwisko <span class="text-red-500">*</span>
            </label>
            <input type="text" name="name" required class="w-full rounded-xl border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-gray-900 dark:text-slate-100 text-sm px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-900 dark:text-slate-200 mb-1">
              E-mail <span class="text-red-500">*</span>
            </label>
            <input type="email" name="email" required class="w-full rounded-xl border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-gray-900 dark:text-slate-100 text-sm px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-900 dark:text-slate-200 mb-1">Organizacja / branża</label>
          <input type="text" name="company" class="w-full rounded-xl border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-gray-900 dark:text-slate-100 text-sm px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-900 dark:text-slate-200 mb-1">
            Co chciałbyś/chciałabyś omówić? <span class="text-red-500">*</span>
          </label>
          <textarea name="message" rows="4" required class="w-full rounded-xl border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-gray-900 dark:text-slate-100 text-sm px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
        </div>

        <!-- Status wiadomości -->
        <div id="form-status" class="hidden">
          <div
            id="form-success"
            class="hidden p-4 bg-green-600 text-white rounded-lg"
          >
            ✓ Wiadomość została wysłana pomyślnie!
          </div>
          <div id="form-error" class="hidden p-4 bg-red-600 text-white rounded-lg">
            <span id="error-message">✗ Wystąpił błąd. Spróbuj ponownie.</span>
          </div>
        </div>

        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
          <button type="submit" id="submit-btn" class="inline-flex items-center justify-center px-5 py-2.5 rounded-xl text-sm font-semibold bg-blue-500 text-white hover:bg-blue-600 transition">
            Wyślij wiadomość
          </button>
          <p class="text-xs text-gray-500 dark:text-slate-400 md:text-right">
            Dbam o poufność Twoich danych. Użyję ich wyłącznie do kontaktu w sprawie PostQ.pl.
          </p>
        </div>
      </form>
    </div>

  </div>
</section>

  <!-- Features Widget *************** -->

  <Features
    id="features"
    title="Jak komputer kwantowy wpływa na komunikację cyfrową?"
    subtitle=""
    columns={2}
    items={[
      {
        title: 'Poufność komunikacji w czasie',
    description: "Zaszyfrowane dane przechwycone dziś mogą zostać zdeszyfrowane i ujawnione w przyszłości, co podnosi ryzyko wycieku informacji o długiej wartości.",
        icon: 'tabler:layers-union',
      },
      {
        title: 'Zaufanie do danych',
        description: "Komputer kwantowy podważa dzisiejsze gwarancje, że informacje są prawdziwe i nienaruszone, co wpływa na wiarygodność procesów opartych na komunikacji cyfrowej.",
        icon: 'tabler:artboard',
      },
      {
        title: 'Pewność tożsamości',
        description:
          "Komputer kwantowy osłabia metody potwierdzania, kto faktycznie uczestniczy w komunikacji, co zwiększa ryzyko podszycia się i błędnych decyzji.",
        icon: 'tabler:writing',
      },
      {
        title: 'Długowieczność podpisów cyfrowych',
        description: "Podpisy oparte na klasycznych algorytmach tracą odporność, co z czasem podważa wartość dowodową dokumentów i transakcji.",
        icon: 'tabler:rocket',
      },
      {
        title: 'Strategiczna przewidywalność',
    description: "Co dotychczas po prostu działało, komputer kwantowy zmienia i wymusza now podejście do bezpieczeństwa komunikacji cyfrowej.",
        icon: 'tabler:eyeglass',
      },
    ]}
  />


  <BlogLatestPosts
    id="blog"
    title="Nowości na blogu"
    information={``}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </BlogLatestPosts>
</Layout>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('contact-form') as HTMLFormElement;
    const submitBtn = document.getElementById('submit-btn') as HTMLButtonElement;
    const formStatus = document.getElementById('form-status') as HTMLElement;
    const successMsg = document.getElementById('form-success') as HTMLElement;
    const errorMsg = document.getElementById('form-error') as HTMLElement;
    const errorText = document.getElementById('error-message') as HTMLElement;

    form?.addEventListener('submit', async (e) => {
      e.preventDefault();

      formStatus.classList.add('hidden');
      successMsg.classList.add('hidden');
      errorMsg.classList.add('hidden');

      submitBtn.disabled = true;
      submitBtn.textContent = 'Wysyłanie...';

      try {
        const formData = new FormData(form);
        
        const response = await fetch('https://api.web3forms.com/submit', {
          method: 'POST',
          body: formData,
        });

        const data = await response.json();

        if (data.success) {
          formStatus.classList.remove('hidden');
          successMsg.classList.remove('hidden');
          form.reset();
        } else {
          throw new Error(data.message || 'Błąd wysyłania');
        }
      } catch (error) {
        formStatus.classList.remove('hidden');
        errorMsg.classList.remove('hidden');
        errorText.textContent = `✗ ${error instanceof Error ? error.message : 'Wystąpił błąd. Spróbuj ponownie.'}`;
        console.error('Error:', error);
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = 'Wyślij wiadomość';
      }
    });
  });
</script>
